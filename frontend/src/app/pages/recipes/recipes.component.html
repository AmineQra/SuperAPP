<div class="min-h-screen bg-[hsl(218deg_50%_91%)] p-4">
  <!-- Search Bar -->
  <div class="mb-8">
    <app-searchbar
      class="bg-white shadow-sm rounded-xl max-w-md mx-auto p-3 transition-all duration-200 focus-within:ring-1 focus-within:ring-[hsl(233deg_36%_38%)]"
    ></app-searchbar>
  </div>

  <!-- Recipe Cards -->
  <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
    @for(recipe of recipes; track recipe) {
    <mat-card
      class="bg-[hsl(213deg_85%_97%)] rounded-3xl shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md"
    >
      <div class="p-4">
        <div class="flex justify-between items-center">
          <mat-card-title>
            <h4
              (click)="toggleDetails(recipe.id)"
              class="text-[hsl(233deg_36%_38%)] font-semibold cursor-pointer hover:underline"
            >
              {{ recipe.name }}
              <span class="ml-2">{{
                showDetailsMap[recipe.id] ? "▼" : "▶"
              }}</span>
            </h4>
          </mat-card-title>

          <div class="flex gap-2">
            <button
              mat-icon-button
              class="!text-[hsl(233deg_36%_38%)] hover:!bg-[hsl(233deg_36%_38%/10%)]"
            >
              <mat-icon>visibility</mat-icon>
            </button>
            <button
              mat-icon-button
              class="!text-[hsl(233deg_36%_38%)] hover:!bg-[hsl(233deg_36%_38%/10%)]"
            >
              <mat-icon>edit</mat-icon>
            </button>
            <button
              (click)="deleteRecipe(recipe.id)"
              mat-icon-button
              class="!text-red-500 hover:!bg-red-100"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>

        <!-- Animated Content -->
        <div [@slideInOut]="showDetailsMap[recipe.id]" class="overflow-hidden">
          <div class="mt-4">
            <img
              mat-card-image
              src="img/pizza.jpg"
              alt="Image de la recette"
              class="rounded-xl"
            />
            <div class="mt-4">
              <h6 class="text-[hsl(233deg_36%_38%)] font-medium mb-2">
                Ingrédients
              </h6>
              <mat-chip-set class="flex flex-wrap gap-2">
                <mat-chip
                  *ngFor="let ingredient of recipe.ingredients"
                  class="!bg-[hsl(233deg_36%_38%/10%)] !text-[hsl(233deg_36%_38%)]"
                >
                  {{ ingredient }}
                </mat-chip>
              </mat-chip-set>
            </div>
          </div>
        </div>

        <mat-chip-set class="mt-4 flex flex-wrap gap-2">
          <mat-chip
            *ngFor="let mealType of recipe.types"
            class="!bg-[hsl(233deg_36%_38%/20%)] !text-[hsl(233deg_36%_38%)]"
          >
            {{ mealType }}
          </mat-chip>
        </mat-chip-set>
      </div>
    </mat-card>
    }
  </div>

  <!-- Floating Action Button -->
  <div class="fixed bottom-8 right-8">
    <button
      (click)="openModal()"
      class="bg-[hsl(233deg_36%_38%)] text-white w-12 h-12 rounded-full shadow-lg flex items-center justify-center text-2xl hover:scale-110 transition-transform duration-200"
    >
      ✚
    </button>
  </div>

  <!-- Modal -->
  <div
    *ngIf="showModal"
    class="fixed inset-0 bg-[hsl(218deg_50%_91%/50%)] backdrop-blur-sm flex items-center justify-center z-50"
    @modalAnimation
  >
    <div
      class="bg-[hsl(213deg_85%_97%)] rounded-3xl shadow-sm p-6 w-full max-w-md mx-4 transition-all duration-300 transform scale-95"
      [class.scale-100]="showModal"
    >
      <!-- ... (keep your existing modal content, update classes as below) ... -->

      <!-- Update inputs -->
      <input
        type="text"
        class="w-full p-3 rounded-xl border-2 border-transparent focus:border-[hsl(233deg_36%_38%)] focus:ring-1 focus:ring-[hsl(233deg_36%_38%)] outline-none transition-all duration-200"
      />

      <!-- Update buttons -->
      <button
        (click)="closeModal()"
        class="bg-red-200 text-gray-700 py-2 px-4 rounded-xl font-medium hover:scale-105 transition-transform"
      >
        Annuler
      </button>
    </div>
  </div>
</div>
